function Ctrl8(a){this.__Props=a?a:{};this.__Ctrls={}}Ctrl8.OfClass=Ctrl8;Ctrl8.ExtendsTo=function(a){function c(){}var b=this.OfClass;c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.baseConstructor=b;a.superClass=b.prototype;a.OfClass=a;a.ExtendsTo=b.ExtendsTo};Ctrl8.prototype.Prop=function(a,c,b,d,e,f){Ctrl8.CreateProp(this,this.__Props,a,c,b,e,d,f)};Ctrl8.prototype.DrillProp=function(a,c,b){b?1:b=Ctrl8;Ctrl8.CreateProp(this,this.__Ctrls,a,new b(c),!0)};
Ctrl8.prototype.CalcProp=function(a,c,b,d){Ctrl8.CalcProp(this,this.__Props,a,c,b,d)};Ctrl8.DefCompareFx=function(a,c){return a===c};Ctrl8.DefChangeFx=function(a){};Ctrl8.CreateProp=function(a,c,b,d,e,f,g,h){f?1:f=Ctrl8.DefCompareFx;g?1:g=Ctrl8.DefChangeFx;h={get:function(){return c[b]},configurable:h?!0:!1};e?1:h.set=function(a){f(c[b],a)?0:(c[b]=a,g(a))};Object.defineProperty(a,b,h);c.hasOwnProperty(b)||void 0===d?1:c[b]=d};
Ctrl8.CalcProp=function(a,c,b,d,e,f){f={get:function(){return d.call(a,b,c)},configurable:f?!0:!1};e?f.set=function(d){e.call(a,d,b,c)}:1;Object.defineProperty(a,b,f)};function DrillCtrl(a){DrillCtrl.baseConstructor.call(this,a);for(var c in this.__Props)a=this.__Props[c],"object"==typeof a?this.DrillProp(c,DrillCtrl,a):this.Prop(c)}Ctrl8.ExtendsTo(DrillCtrl);function EventCtrl(a){EventCtrl.baseConstructor.call(this,a);this.__Events=[]}Ctrl8.ExtendsTo(EventCtrl);
EventCtrl.prototype.Emit=function(){var a=[].concat.call(arguments),c=a[0];a.splice(0,1);(c=this.__Events[c])?c.forEach(function(b){b.apply(this,a)}):1};EventCtrl.prototype.On=function(a,c){var b=this.__Events[a]||(this.__Events[a]=[]);0>b.indexOf(c)?b.push(c):1};EventCtrl.prototype.Off=function(a,c){var b=this.__Events[a]||(this.__Events[a]=[]),d=b.indexOf(c);0<=d?b.splice(d,1):1};
function WebCtrl(a,c){WebCtrl.baseConstructor.call(this,c);this.DOM="string"==typeof a?document.querySelector(a):a;var b=WebCtrl.GetInit(this.DOM),d=this.__Props,e;for(e in b)d.hasOwnProperty(e)?1:d[e]=b[e]}EventCtrl.ExtendsTo(WebCtrl);WebCtrl.GetInit=function(a){return a=(a=a.getAttribute("init"))&&a.length?eval("("+a+")")||{}:{}};var _8=function(a){return new DOMCtrl(a)};function DOMCtrl(a){this.DOM="string"==typeof a?document.querySelector(a):a}
DOMCtrl.prototype.attr=function(a,c){var b=this,d;d=Array.isArray(a)?"array":typeof a;if("string"==d){if(void 0===c)return this.DOM.getAttribute(a);null==c?this.DOM.removeAttribute(a):this.DOM.setAttribute(a,c);return b}if("array"==d){if(void 0===c){var e={};a.forEach(function(a){e[a]=b.DOM.getAttribute(a)});return e}null==c?a.forEach(function(a){b.DOM.removeAttribute(a)}):a.forEach(function(a){b.DOM.setAttribute(a,c)});return b}if("object"==d)for(var f in a)d=a[f],null==d?b.DOM.removeAttribute(f):
b.DOM.setAttribute(f,d.call?d(f):d);return b};DOMCtrl.prototype.prop=function(a,c){var b=this.DOM,d;d=Array.isArray(a)?"array":typeof a;if("string"==d){if(void 0===c)return b[a];null==c?delete b[a]:b[a]=c;return this}if("array"==d){if(void 0===c){var e={};a.forEach(function(a){e[a]=b[a]});return e}null==c?a.forEach(function(a){delete b[a]}):a.forEach(function(a){b[a]=c});return this}if("object"==d)for(var f in a)d=a[f],null==d?delete b[f]:b[f]=d.call?d(f):d;return this};
DOMCtrl.prototype.css=function(a,c){var b=this.DOM.style,d;d=Array.isArray(a)?"array":typeof a;if("string"==d){if(void 0===c)return b.getPropertyValue(a);null==c?b.removeProperty(a):b.setProperty(a,c);return this}if("array"==d){if(void 0===c){var e={};a.forEach(function(a){e[a]=b.getPropertyValue(a)});return e}null==c?a.forEach(function(a){b.removeProperty(a)}):a.forEach(function(a){b.setProperty(a,c)});return this}if("object"==d)for(var f in a)d=a[f],null==d?b.removeProperty(f):b.setProperty(f,d.call?
d(f):d);return this};DOMCtrl.prototype.on=function(a,c){this.DOM.addEventListener(a,c);return this};DOMCtrl.prototype.sel=function(a){return new DOMCtrl(this.DOM.querySelector(a))};DOMCtrl.prototype.append=function(a){a=document.createElement(a);this.DOM.append(a);return new DOMCtrl(a)};DOMCtrl.prototype.remove=function(a){a=this.DOM.querySelectorAll(a);for(var c=0;c<a.length;c++)this.DOM.removeChild(a[c])};
DOMCtrl.prototype.text=function(a){if(void 0===a)return this.DOM.textContent;this.DOM.textContent=a;return this};DOMCtrl.prototype.html=function(a){if(void 0===a)return this.DOM.innerHTML;this.DOM.innerHTML=a;return this};DOMCtrl.prototype.rm=function(a){a=this.DOM.querySelectorAll(a);for(var c=0;c<a.length;c++)this.DOM.removeChild(a[c]);return this};
DOMCtrl.Utils={MouseXY:function(a,c){var b=a.getBoundingClientRect();return[c.clientX-b.left,c.clientY-b.top]},EnableSpan:function(a,c){var b;a.addEventListener("mousemove",function(d){d=window.event||d;if(1==d.buttons){var e=DOMCtrl.Utils.MouseXY(a,d);c.call(a,d,{dx:e[0]-b[0],dy:e[1]-b[1],m1:[b[0],b[1]],m2:[e[0],e[1]]});b=e}else b=DOMCtrl.Utils.MouseXY(a,d);d.stopPropagation();d.preventDefault()})},EnableDrag:function(a,c,b,d){var e;a.addEventListener("mousemove",function(f){f=window.event||f;if(1==
f.buttons){var g=DOMCtrl.Utils.MouseXY(a,f),h=d?d():[0,0];g[0]+=h[0];g[1]+=h[1];c.call(a,f,{dx:g[0]-e[0],dy:g[1]-e[1],m1:[e[0],e[1]],m2:[g[0],g[1]]});b?e=g:0}else{var h=d?d():[0,0];e=DOMCtrl.Utils.MouseXY(a,f);e[0]+=h[0];e[1]+=h[1]}f.stopPropagation();f.preventDefault()})}};
